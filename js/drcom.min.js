$(document).ready(function() {
    // #WEV - Loading Status
    $(window).load(function() { 
        $(".loading").fadeOut("slow"); 
    });

	var getPage   = $('body').data('page');
	var getPageID = $('body').data('id');
    console.log('PAGE NAME: '+getPage+'\nPAGE ID: '+getPageID);

    // #WEV - Loading Modules
    $("[data-include]").each(function(){
        var Item = $(this);
        Item.load(Item.data('include'), function(){
            Item.contents().unwrap();
            // #WEV - After Elements Content Loading
            $('.nav-'+getPageID).addClass('current');
            $('ul#nav').onePageNav({
                'scrollOffset': 117,
                currentClass: 'current',
                changeHash: false,
                filter: ':not(.external)',
            });

            $('.navbar-brand').bind('tapone click', function() {
                $('html, body').css({'height':'100%'});
                $('#popup, .overlay').fadeIn();   
            });
            $('#popup .close').bind('tapone click', function() {
                $('html, body').css({'height':'auto'});
                $('#popup, .overlay').hide();   
            });
        }); 
    });

    // #WEV - Scroll Top Bar Animation
    $(window).scroll(function() {
         $("section").each(function() {
            if( $(window).scrollTop() > $(this).offset().top - 390 )
                $(this).css('opacity', 1);
                return
        })
		if ($(this).scrollTop() > 1) $('nav.navbar').addClass("sticky navbar-fixed-top");
		else $('nav.navbar').removeClass("sticky navbar-fixed-top");
	});

})
